---
title: How to Use
sidebar_position: 2
---

# How to Use the Authentication Package

This guide provides instructions on how to install and use the `@com/auth` package in your Next.js application. It includes client-side and server-side usage guidelines, along with best practices to ensure secure and efficient implementation.

---

## Installation

Install the package into your project using `pnpm`:

```bash
pnpm install @com/auth
```



## Client-Side Usage

For client-side authentication, ensure that your application is wrapped in a SessionProvider from next-auth/react. This is required to manage and provide authentication context throughout your application.

#### Wrapping Your App with SessionProvider

To use the authentication package, wrap any consuming component with the SessionProvider:

```tsx
import { SessionProvider } from 'next-auth/react';

function MyApp({ Component, pageProps }) {
  return (
    <SessionProvider session={pageProps.session}>
      <Component {...pageProps} />
    </SessionProvider>
  );
}

export default MyApp;
```

### Using the Hook in Your Components

Within your components, you can access session information using the useSession hook provided by next-auth/react. This allows you to retrieve session details and determine the authentication state.

```tsx
import { useSession } from 'next-auth/react';

function MyComponent() {
  const { data: session, status } = useSession();

  if (status === 'loading') {
    return <p>Loading...</p>;
  }

  if (!session) {
    return <p>You are not logged in.</p>;
  }

  return <p>Welcome, {session.user.name}!</p>;
}
```

## Server-Side Usage

Server-side authentication is possible but should be used cautiously to avoid unintentional data leakage. Use this approach only when absolutely necessary and ensure your code adheres to secure practices.

Fetching the Session on the Server

To retrieve the session on the server, use the auth utility provided by the package:

```tsx

import { auth } from "@com/auth";
 const session = await auth();
```

### Best Practices for Server-Side Usage

- **Avoid Unnecessary Calls:** Limit server-side calls to authentication functions to avoid performance overhead and potential security issues.
- **Protect Sensitive Data:** Always sanitize and validate data passed between the client and server to prevent accidental exposure of sensitive information.
- **Use Secure Headers:** Configure headers like Content-Security-Policy and Strict-Transport-Security to enhance the security of your server-side implementation.


## Notes and Recommendations

- **Session Context:** Always ensure your client-side components have access to the session context by wrapping them in the SessionProvider.
- **Avoid SSR Unless Necessary:** Use server-side authentication only when client-side methods are insufficient for your use case. Server-side rendering can introduce complexities and potential security risks.
- **Environment Variables:** Ensure all sensitive credentials (e.g., Cognito client ID and secret) are stored in environment variables and not hardcoded in your codebase.